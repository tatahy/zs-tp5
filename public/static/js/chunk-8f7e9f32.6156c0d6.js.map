{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./src/utility/util.js","webpack:///./src/components/admin/test/PostData.vue?7cbf","webpack:///src/components/admin/test/PostData.vue","webpack:///./src/components/admin/test/PostData.vue?f68f","webpack:///./src/components/admin/test/PostData.vue"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","debug","process","asyFetch","url","opt","typeArr","optDefault","method","headers","type","res","ok","result","cont","Object","assign","includes","fetch","blob","text","formData","json","data","status","statusText","getServUrl","str","window","location","href","hasHash","indexOf","URL","slice","port","render","_vm","_h","$createElement","_c","_self","staticClass","_v","on","postData","resetData","attrs","model","form","param","callback","$$v","$set","expression","module","timestr","_s","_e","staticRenderFns","name","info_id","rh","amp","vol","temp","sn","timestamp","plus","tblName","customer_id","timer","computed","req","watch","methods","setTimer","setInterval","evt","preventDefault","formDefault","clearTimer","clearInterval","components","BRow","BCol","BButton","BForm","BFormGroup","BFormInput","created","beforeDestroy","component"],"mappings":"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","file":"static/js/chunk-8f7e9f32.6156c0d6.js","sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export const debug= process.env.NODE_ENV === \"development\";\r\n\r\nexport async function asyFetch(url, opt = {}) {\r\n  let typeArr = [\"blob\", \"text\", \"json\", \"formData\"];\r\n  //js原生fetch()方法的第二参数\r\n  let optDefault = {\r\n    method: \"GET\", // *GET, POST, PUT, DELETE, etc\r\n    //mode: 'no-cors', // no-cors, cors, *same-origin\r\n    //cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    //credentials: 'omit', // include, *same-origin, omit\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n      //    //'Content-Type': 'application/x-www-form-urlencoded',\r\n    },\r\n    //redirect: 'follow', // manual, *follow, error\r\n    //referrer: 'no-referrer', // no-referrer, *client\r\n    //body:JSON.stringify({zz:11}), // body data type must match \"Content-Type\" header while method=='POST' or 'PUT'\r\n    type: \"json\"\r\n  };\r\n  let res = { ok: false };\r\n  let result = {\r\n    ok: false,\r\n    cont: {}\r\n  };\r\n\r\n  opt = Object.assign({}, optDefault, opt);\r\n\r\n  // console.log(url, opt);\r\n\r\n  if (url && typeArr.includes(opt.type)) {\r\n    res = await fetch(url, opt);\r\n  }\r\n\r\n  if (res.ok) {\r\n    result.ok = true;\r\n    switch (opt.type) {\r\n      case \"blob\":\r\n        result.cont = await res.blob();\r\n        break;\r\n      case \"text\":\r\n        result.cont = await res.text();\r\n        break;\r\n      case \"formData\":\r\n        result.cont = await res.formData();\r\n        break;\r\n      default:\r\n        result.cont = await res.json();\r\n        break;\r\n    }\r\n  } else {\r\n    // result.cont=await res.blob();\r\n    // result.cont = res;\r\n    // console.log(res.status);\r\n    // console.log(res.statusText);\r\n    result.cont.data=[{result:res.ok,status:res.status,statusText:res.statusText}];\r\n    // result.cont=res;\r\n    // console.log(result);\r\n    // console.log(res.headers)\r\n  }\r\n  //console.log(result)\r\n  //async函数返回的是Promise对象\r\n  return result;\r\n}\r\n\r\nexport function getServUrl(){\r\n  const str=window.location.href;\r\n  const hasHash=str.indexOf('#')>0;\r\n  const url=hasHash?new URL(str.slice(0,str.indexOf('#'))):new URL(str);\r\n  \r\n  debug?url.port=20000:'';\r\n  \r\n  return url;\r\n\r\n}\r\n\r\n\r\n\r\n// export {asyFetch };\r\nexport default {};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h4',{staticClass:\"text-center\"},[_vm._v(\"写入“data_raw”数据表数据（http协议）\")]),_c('b-form',{staticClass:\"pt-2\",on:{\"submit\":_vm.postData,\"reset\":_vm.resetData}},[_c('b-row',[_c('b-col',{attrs:{\"sm\":\"6\"}},[_c('b-form-group',{attrs:{\"label-cols-sm\":\"3\",\"label\":\"相对湿度(%):\",\"label-align-sm\":\"right\",\"label-for\":\"host\"}},[_c('b-form-input',{attrs:{\"id\":\"rh\"},model:{value:(_vm.form.data.param.rh),callback:function ($$v) {_vm.$set(_vm.form.data.param, \"rh\", $$v)},expression:\"form.data.param.rh\"}})],1),_c('b-form-group',{attrs:{\"label-cols-sm\":\"3\",\"label\":\"电流(A):\",\"label-align-sm\":\"right\",\"label-for\":\"port\"}},[_c('b-form-input',{attrs:{\"id\":\"amp\"},model:{value:(_vm.form.data.param.amp),callback:function ($$v) {_vm.$set(_vm.form.data.param, \"amp\", $$v)},expression:\"form.data.param.amp\"}})],1),_c('b-form-group',{attrs:{\"label-cols-sm\":\"3\",\"label\":\"电压(V):\",\"label-align-sm\":\"right\",\"label-for\":\"path\"}},[_c('b-form-input',{attrs:{\"id\":\"vol\"},model:{value:(_vm.form.data.param.vol),callback:function ($$v) {_vm.$set(_vm.form.data.param, \"vol\", $$v)},expression:\"form.data.param.vol\"}})],1),_c('b-form-group',{attrs:{\"label-cols-sm\":\"3\",\"label\":\"温度(C):\",\"label-align-sm\":\"right\",\"label-for\":\"path\"}},[_c('b-form-input',{attrs:{\"id\":\"temp\"},model:{value:(_vm.form.data.param.temp),callback:function ($$v) {_vm.$set(_vm.form.data.param, \"temp\", $$v)},expression:\"form.data.param.temp\"}})],1)],1),_c('b-col',{attrs:{\"sm\":\"6\"}},[_c('b-form-group',{attrs:{\"label-cols-sm\":\"3\",\"label\":\"设备Id:\",\"label-align-sm\":\"right\",\"label-for\":\"equipmentId\"}},[_c('b-form-input',{attrs:{\"id\":\"equipmentId\"},model:{value:(_vm.form.info_id),callback:function ($$v) {_vm.$set(_vm.form, \"info_id\", $$v)},expression:\"form.info_id\"}})],1),_c('b-form-group',{attrs:{\"label-cols-sm\":\"3\",\"label\":\"模块SN:\",\"label-align-sm\":\"right\",\"label-for\":\"sn\"}},[_c('b-form-input',{attrs:{\"id\":\"sn\"},model:{value:(_vm.form.data.module.sn),callback:function ($$v) {_vm.$set(_vm.form.data.module, \"sn\", $$v)},expression:\"form.data.module.sn\"}})],1),_c('b-form-group',{attrs:{\"label-cols-sm\":\"3\",\"label\":\"模块类型:\",\"label-align-sm\":\"right\",\"label-for\":\"type\"}},[_c('b-form-input',{attrs:{\"id\":\"type\"},model:{value:(_vm.form.data.module.type),callback:function ($$v) {_vm.$set(_vm.form.data.module, \"type\", $$v)},expression:\"form.data.module.type\"}})],1),_c('b-form-group',{attrs:{\"label-cols-sm\":\"3\",\"label\":\"时间:\",\"label-align-sm\":\"right\",\"label-for\":\"time\"}},[_c('b-form-input',{attrs:{\"id\":\"time\",\"disabled\":\"\"},model:{value:(_vm.timestr),callback:function ($$v) {_vm.timestr=$$v},expression:\"timestr\"}})],1)],1)],1),(_vm.res)?_c('b-row',{staticClass:\"m-3\"},[_c('p',[_vm._v(\"向服务器post结果:\")]),_c('p',[_vm._v(_vm._s(_vm.res))])]):_vm._e(),_c('b-row',[_c('b-col',{staticClass:\"text-right\"},[_c('b-button',{staticClass:\"m-1\",attrs:{\"variant\":\"primary\",\"type\":\"submit\"}},[_vm._v(\"Post\")]),_c('b-button',{staticClass:\"m-1\",attrs:{\"type\":\"reset\"}},[_vm._v(\"Reset\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h4 class=\"text-center\">写入“data_raw”数据表数据（http协议）</h4>\n    <!-- <b-form> -->\n    <b-form v-on:submit=\"postData\" v-on:reset=\"resetData\" class=\"pt-2\">\n      <b-row>\n        <b-col sm=\"6\">\n          <b-form-group label-cols-sm=\"3\" label=\"相对湿度(%):\" label-align-sm=\"right\" label-for=\"host\">\n            <b-form-input id=\"rh\" v-model=\"form.data.param.rh\"></b-form-input>\n          </b-form-group>\n\n          <b-form-group label-cols-sm=\"3\" label=\"电流(A):\" label-align-sm=\"right\" label-for=\"port\">\n            <b-form-input id=\"amp\" v-model=\"form.data.param.amp\"></b-form-input>\n          </b-form-group>\n\n          <b-form-group label-cols-sm=\"3\" label=\"电压(V):\" label-align-sm=\"right\" label-for=\"path\">\n            <b-form-input id=\"vol\" v-model=\"form.data.param.vol\"></b-form-input>\n          </b-form-group>\n          <b-form-group label-cols-sm=\"3\" label=\"温度(C):\" label-align-sm=\"right\" label-for=\"path\">\n            <b-form-input id=\"temp\" v-model=\"form.data.param.temp\"></b-form-input>\n          </b-form-group>\n        </b-col>\n        <b-col sm=\"6\">\n          <b-form-group\n            label-cols-sm=\"3\"\n            label=\"设备Id:\"\n            label-align-sm=\"right\"\n            label-for=\"equipmentId\"\n          >\n            <b-form-input id=\"equipmentId\" v-model=\"form.info_id\"></b-form-input>\n          </b-form-group>\n          <b-form-group label-cols-sm=\"3\" label=\"模块SN:\" label-align-sm=\"right\" label-for=\"sn\">\n            <b-form-input id=\"sn\" v-model=\"form.data.module.sn\"></b-form-input>\n          </b-form-group>\n\n          <b-form-group label-cols-sm=\"3\" label=\"模块类型:\" label-align-sm=\"right\" label-for=\"type\">\n            <b-form-input id=\"type\" v-model=\"form.data.module.type\"></b-form-input>\n          </b-form-group>\n          <b-form-group label-cols-sm=\"3\" label=\"时间:\" label-align-sm=\"right\" label-for=\"time\">\n            <b-form-input id=\"time\" v-model=\"timestr\" disabled></b-form-input>\n          </b-form-group>\n        </b-col>\n      </b-row>\n\n      <b-row v-if=\"res\" class=\"m-3\">\n        <p>向服务器post结果:</p>\n        <p>{{res}}</p>\n      </b-row>\n\n      <b-row>\n        <!-- <b-col sm=\"6\">\n            <h5 class=\"text-right\">\n              <span\n                class=\"badge badge-pill\"\n                v-bind:class=\"isConnected?`badge-success`:`badge-danger`\"\n              >{{isConnected?`Connected`:`Disconnected`}}</span>\n              {{mqttUrl.href}}\n            </h5>\n        </b-col>-->\n        <b-col class=\"text-right\">\n          <b-button class=\"m-1\" variant=\"primary\" type=\"submit\">Post</b-button>\n          <b-button class=\"m-1\" type=\"reset\">Reset</b-button>\n        </b-col>\n      </b-row>\n    </b-form>\n  </div>\n</template>\n\n<script>\n//引入BsV的component\nimport {\n  BRow,\n  BCol,\n  // BFormSelect,\n  BButton,\n  // BCard,\n  BForm,\n  // BCardGroup,\n  // BCardFooter,\n  BFormGroup,\n  BFormInput\n  // BFormRadioGroup\n} from \"bootstrap-vue\";\n\nimport { asyFetch, getServUrl } from \"@/utility/util\";\n\nexport default {\n  name: \"PostData\",\n  data() {\n    return {\n      form: {\n        //与数据表中的字段对应\n        info_id: \"null\",\n        data: {\n          param: {\n            rh: 92.0,\n            amp: 1000.1,\n            vol: 5,\n            temp: 26.9\n          },\n          module: {\n            sn: \"m001\",\n            type: \"控制/采集模块\"\n          },\n          timestamp: null\n        }\n      },\n      plus: {\n        tblName: \"data_raw\",\n        customer_id: 0\n      },\n      timer: null, //定义计时器名称\n      timestr: \"\",\n      res: null\n    };\n  },\n  computed: {\n    req() {\n      return Object.assign({}, this.form, this.plus);\n    }\n  },\n  watch: {\n    // req: {\n    //   handler: \"resetData\",\n    //   deep: true,\n    //   immediate: true\n    // }\n  },\n  // TODO: post前的数据校验\n  methods: {\n    setTimer: function() {\n      if (this.timer == null) {\n        this.timer = setInterval(() => {\n          const dateNow = new Date();\n    \n          this.timestr = dateNow.toLocaleString();\n          this.req.data.timestamp = dateNow.getTime();\n          // this.req.data.timestamp = dateNow.now();\n          // console.log(this.req.data.timestamp);\n        }, 1000);\n      }\n    },\n    postData: async function(evt) {\n      evt.preventDefault();\n      const opt = { method: \"POST\", body: JSON.stringify(this.req) };\n      const url = getServUrl() + \"equipment/create\";\n      this.res = null;\n      this.res = await asyFetch(url, opt);\n    },\n    resetData: function(evt) {\n      evt.preventDefault();\n      const formDefault = {\n        info_id: \"null\",\n        data: {\n          param: {\n            rh: 92.0,\n            amp: 1000.1,\n            vol: 5,\n            temp: 26.9\n          },\n          module: {\n            sn: \"m001\",\n            type: \"控制/采集模块\"\n          },\n          timestamp: null\n        }\n      };\n      this.form = Object.assign({}, this.form, formDefault);\n    },\n    //清除定时器\n    clearTimer() {\n      //清除定时器\n      clearInterval(this.timer);\n      this.timer = null;\n    }\n  },\n  components: {\n    BRow,\n    BCol,\n    BButton,\n    // BCard,\n    BForm,\n    // BCardGroup,\n    // BCardFooter,\n    BFormGroup,\n    BFormInput\n    // BFormRadioGroup\n  },\n  created() {\n    // 每次进入界面时，先清除之前的所有定时器，然后启动新的定时器\n    this.clearTimer();\n    this.timer = null;\n    this.setTimer();\n  },\n  // 最后在beforeDestroy()生命周期内清除定时器：\n  beforeDestroy() {\n    this.clearTimer();\n  }\n};\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostData.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PostData.vue?vue&type=template&id=5ae393d3&scoped=true&\"\nimport script from \"./PostData.vue?vue&type=script&lang=js&\"\nexport * from \"./PostData.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ae393d3\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}